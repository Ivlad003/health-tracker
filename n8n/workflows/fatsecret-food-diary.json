{
  "_comment": "FatSecret Food Diary | n8n ID: 5HazDbwcUsZPvXzS | Status: INACTIVE (awaiting OAuth1)",
  "_note": "Placeholder workflow. Fetch Food Diary node needs to be updated once OAuth1 is connected.",
  "name": "FatSecret Food Diary",
  "nodes": [
    {
      "id": "webhook-diary",
      "name": "Diary Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [250, 300],
      "parameters": {
        "httpMethod": "GET",
        "path": "fatsecret/diary",
        "responseMode": "lastNode",
        "options": {}
      },
      "webhookId": "fatsecret-diary"
    },
    {
      "id": "fetch-diary",
      "name": "Fetch Food Diary",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [490, 300],
      "parameters": {
        "method": "GET",
        "url": "https://ifconfig.me",
        "authentication": "none",
        "sendBody": false,
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            { "name": "User-Agent", "value": "curl" }
          ]
        },
        "options": { "response": { "response": { "responseFormat": "text" } } }
      }
    },
    {
      "id": "format-diary",
      "name": "Format Results",
      "type": "n8n-nodes-base.code",
      "typeVersion": 1,
      "position": [730, 300],
      "parameters": {
        "jsCode": "const entries = items[0].json.food_entries?.food_entry || [];\nconst list = Array.isArray(entries) ? entries : [entries];\n\nlet totalCalories = 0;\nconst meals = list.map(e => {\n  const cal = parseFloat(e.calories) || 0;\n  totalCalories += cal;\n  return {\n    food: e.food_entry_name,\n    meal: e.meal,\n    calories: cal,\n    protein: e.protein,\n    fat: e.fat,\n    carbs: e.carbohydrate,\n    serving: e.number_of_units + ' ' + e.serving_description\n  };\n});\n\nreturn [{ json: { date: 'today', total_calories: Math.round(totalCalories), entries_count: meals.length, meals } }];"
      }
    }
  ],
  "connections": {
    "Diary Webhook": {
      "main": [[{ "node": "Fetch Food Diary", "type": "main", "index": 0 }]]
    },
    "Fetch Food Diary": {
      "main": [[{ "node": "Format Results", "type": "main", "index": 0 }]]
    }
  },
  "settings": {
    "executionOrder": "v1"
  }
}
